---
import 'styles/base.postcss';
import { get_current_locale } from 'tools/i18n';
import LangMetaTags from 'components/tags/LangMetaTags.astro';
import LangChange from 'components/LangChange.svelte';
import GoogleSearch from 'components/tags/GoogleSearch.astro';
import GoogleAnalytics from 'components/tags/GoogleAnalytics.astro';
// import { Spa } from 'astro-spa';

const { title, favicon, className, metaTags } = Astro.props;
const locale = get_current_locale(Astro.params.lang!);
---

<html lang={locale}>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href={`/${favicon || 'favicon.ico'}`} />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <LangMetaTags {...metaTags} />
    <GoogleSearch />
  </head>
  <body class:list={['p-2', className]}>
    <slot />
    <LangChange client:idle value={locale} />
    <GoogleAnalytics />
    <!-- <Spa prefetch={false} defaultAnimation={false} progressBar={false} /> -->
  </body>
</html>
